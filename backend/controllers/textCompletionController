const { AIService, getAIService } = require('../src/ai_services');
const aiService = getAIService(process.env.GOOGLE_API_KEY, 'google');

async function handleTextCompletion(req, res) {
    console.log('handleTextCompletion', req.body);
    const text = req.body.text;
    const completion = await aiService.textCompletion(text);
    res.setHeader('Content-Type', 'text/event-stream');
    res.write(`data: ${JSON.stringify(completion)}\n\n`);
    res.end();
}

module.exports = { handleTextCompletion };